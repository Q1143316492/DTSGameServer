# API 接口文档

[TOC]

# 1.0 用户管理 user_server

## 1.1 用户登入[user_login_service]

**Request**:

| 属性名   | 类型   | 备注   |
| -------- | ------ | ------ |
| username | string | 用户名 |
| password | string | 密码   |

**Response**

| 属性名        | 类型 | 备注         |
| ------------- | ---- | ------------ |
| ret           | int  | 标注请求结果 |
| login_success | bool | 是否允许登入 |



## 1.2 用户注册[user_register_service]

**Request**:

| 属性名   | 类型   | 备注   |
| -------- | ------ | ------ |
| username | string | 用户名 |
| password | string | 密码   |

**Response**

| 属性名           | 类型 | 备注         |
| ---------------- | ---- | ------------ |
| ret              | int  | 标注请求结果 |
| register_success | bool | 是否允许登入 |



---



# 2.0 游戏房间管理 room_server

每一局游戏，都是多个玩家在同一个场景的行为。把场景定义为房间

这块接口控制玩家加入场景的行为。

## 2.1 玩家加入一个游戏场景[enter_room_service]

**note:**

游戏开始，玩家加入一个初始化的场景。在这里选择下一步游戏行为。目前先让全服玩家在同一场景

**Request**:

| 属性名        | 类型 | 备注                                                         |
| ------------- | ---- | ------------------------------------------------------------ |
| user_id       | int  | 用户id                                                       |
| sub_server_id | int  | 加入服务器分区id。现在测试默认都在一个服务下(客户端决定)，先全分区1 |
| room_type     | int  | 游戏房间类型【1: 初始场景】                                  |

ps:

初始场景：玩家登入后即进入初始场景。等待匹配正式游戏。

**Response**

| 属性名  | 类型   | 备注         |
| ------- | ------ | ------------ |
| ret     | int    | 标注请求结果 |
| room_id | int    | 房间编号     |
| err_msg | string | 错误信息     |



## 2.2 询问玩家所在房间有哪些其他玩家[query_room_users_service]

**note:**

游戏开始，玩家一定属于某一个游戏场景。查询该玩家所在场景有哪些玩家。

**Request**:

| 属性名  | 类型 | 备注 |
| ------- | ---- | ---- |
| room_id | int  | id   |

**Response**

| 属性名       | 类型   | 备注                               |
| ------------ | ------ | ---------------------------------- |
| ret          | int    | 标注请求结果                       |
| user_id_list | string | 玩家用户名集合，用英文分号分隔 “;” |
| err_msg      | string | 错误信息                           |



## 2.3 询问玩家所在房间[room_query_user_belonged_room_service]

**note:**

游戏开始，玩家一定属于某一个游戏场景。查询该玩家所在场景有哪些玩家。

**Request**:

| 属性名  | 类型 | 备注 |
| ------- | ---- | ---- |
| user_id | int  | id   |

**Response**

| 属性名        | 类型   | 备注               |
| ------------- | ------ | ------------------ |
| ret           | int    | 标注请求结果       |
| sub_server_id | int    | 玩家所属服务器分区 |
| room_type     | int    | 场景地图类型       |
| room_id       | int    | 房间id             |
| err_msg       | string | 错误原因           |



# 3.0 游戏玩家互动管理

## 3.1 询问有关玩家的信息[enter_init_room_service]

**note:**

游戏开始，玩家加入一个初始化的场景。在这里选择下一步游戏行为。目前先让全服玩家在同一场景

**Request**:

| 属性名        | 类型   | 备注                                       |
| ------------- | ------ | ------------------------------------------ |
| username      | string | 用户名                                     |
| sub_server_id | int    | 加入服务器分区id。现在默认都在一个服务下。 |

**Response**

| 属性名 | 类型 | 备注         |
| ------ | ---- | ------------ |
| ret    | int  | 标注请求结果 |